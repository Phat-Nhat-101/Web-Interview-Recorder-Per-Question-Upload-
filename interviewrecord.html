<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Interview Records</title>
<style>
  body { font-family: Arial; background:#f5f5f5; margin:0; }
  header { background:#004aad; color:white; padding:20px; text-align:center; font-size:22px; }
  main { max-width:900px; margin:20px auto; padding:10px; }
  .record {
    background:white;
    border-left:5px solid #004aad;
    padding:15px;
    border-radius:5px;
    margin-bottom:15px;
  }
  .record h3 { margin:0; color:#004aad; }
  .record p { margin:4px 0; font-size:14px; }
  .viewBtn {
    margin-top:8px;
    padding:8px 12px;
    background:#004aad;
    color:#fff;
    border:none;
    border-radius:5px;
    cursor:pointer;
  }
</style>
</head>
<body>
<header>Interview Records</header>

<main id="recordList">Loading...</main>

<script>
const url = new URLSearchParams(window.location.search);
const meetingId = url.get("meetingId");

if(!meetingId){
  document.getElementById('recordList').innerHTML = "Missing meetingId!";
}

// GỌI API LẤY DANH SÁCH RECORDS TỪ SERVER
fetch(`/api/records/${meetingId}`)
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById("recordList");

    if(!data.ok || data.records.length === 0){
      list.innerHTML = "No records found!";
      return;
    }

    list.innerHTML = "";

    data.records.forEach(folder => {
      const div = document.createElement("div");
      div.className = "record";
      div.innerHTML = `
        <h3>Session Folder:</h3>
        <p>${folder}</p>
        <button class="viewBtn" onclick="viewRecord('${meetingId}', '${folder}')">View Detail</button>
      `;
      list.appendChild(div);
    });
  });

// ĐÚNG TÊN FILE RECORDVIEW
function viewRecord(meetingId, folder){
  window.location.href = `recordview.html?meetingId=${meetingId}&folder=${folder}`;
}
</script>

</body>
</html>

